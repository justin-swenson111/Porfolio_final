<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.0/themes/smoothness/jquery-ui.css">
	<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
	<script src="https://code.jquery.com/ui/1.13.0/jquery-ui.js"></script>
    <link rel="stylesheet" href="./styles/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
</head>
<body>
    <header>
        <div>
            <img src="https://i.postimg.cc/g235MZst/logo-modified.png" alt="">
            <h1>Contact Me!</h1>
        </div>
        <nav>
            <a href="projects.html">projects</a>
            <a href="index.html">Home</a>
            <a href="about.html">About</a>
        </nav>
    </header>
    <main>
        <section class="contacts">
            <div class="contactLayout">
                <article class="links">
                    <h1>Contact Me</h1>
                    <p>If you would like to get in touch with me, please fill out the form below or reach out to me on my social media accounts.</p>
                    <div id="socials">
                        <a href=""><i class="fa-brands fa-linkedin"></i></a>
                        <a href=""><i class="fa-brands fa-github"></i></a>
                        <a href=""><i class="fa-solid fa-envelope"></i></a>
                    </div>
                </article>
                <article id="xkcd">
                    <h1>Random XKCD comic</h1>
                    <img src="https://imgs.xkcd.com/comics/robot.png" alt="xkcd comic" id="xkcdImg">
                    <p id="xkcdAlt">A robot is holding a sign that says "I am a robot".</p>
                </article>
            </div>
            
            <article class="contact-form">
                <h1>Email Me Directly!</h1>
                <form action="https://formspree.io/f/manoerjl" method="POST">
                    <label>
                        Your name:
                        <br>
                    </label>
                    <input type="text" id="name" required class="emailInp" >
                    <label>
                        Your email:
                        <br>
                    </label>
                    <input type="email" id="email"  required class="emailInp">
                      <label>
                        Email subject:
                        <br>
                    </label>
                    <input type="text" id="subject" required class="emailInp">
                      <label>
                        Your message:
                        <br>
                    </label>
                    <textarea id="message" required class="emailInp"></textarea>
                      <!-- your other form fields go here -->
                      <button type="submit" id="send">Send</button>
                </form>
            </article>
        </section>

    </main>
    <footer>
        <div id="socials">
            <a href=""><i class="fa-brands fa-linkedin"></i></a>
            <a href=""><i class="fa-brands fa-github"></i></a>
            <a href=""><i class="fa-solid fa-envelope"></i></a>
        </div>
        <p>Â© 2023 Justin Swenson</p>
    </footer>
</body>
<script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
</script>
<script type="text/javascript">
    $(document).ready(function() {

        (function(){
            emailjs.init({
                publicKey: "Z6o8v9NxTdxRlUiL-",
            });
        })();

        function sendEmail() {
            let name = $("#name").val();
            let email = $("#email").val();
            let subject = $("#subject").val();
            let message = $("#message").val();
            emailjs.send("default_service", "template_74vwj8q", {
                subject:subject,
                sender: name,
                message: message,
                email: email
            }).then(response => alert("Email sent!"),
            error => alert("FAILED...", error)
            );
        }
        $("#send").click(function(event) {
            event.preventDefault(); // Prevent the default form submission
            sendEmail();
        });

        function getRandomComic() {
            let num = Math.floor(Math.random() * 2500);
            let proxyUrl = "https://cors-anywhere.herokuapp.com/";
            let url = proxyUrl + `https://xkcd.com/${num}/info.0.json`;
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    $("#xkcdImg").attr("src", data.img);
                    $("#xkcdAlt").text(data.alt);
                })
                .catch(error => console.error("Error fetching XKCD comic:", error));
        }
        getRandomComic();
    });
</script>
</html>